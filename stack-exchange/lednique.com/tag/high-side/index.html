<!DOCTYPE html>
<html lang="en-GB" prefix="og: http://ogp.me/ns#" class="no-js">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="profile" href="http://gmpg.org/xfn/11">
		<script>(function(html){html.className = html.className.replace(/\bno-js\b/,'js')})(document.documentElement);</script>
<title>high-side Archives | LEDnique</title>
<script>(function(d, s, id){
				 var js, fjs = d.getElementsByTagName(s)[0];
				 if (d.getElementById(id)) {return;}
				 js = d.createElement(s); js.id = id;
				 js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.6";
				 fjs.parentNode.insertBefore(js, fjs);
			   }(document, 'script', 'facebook-jssdk'));</script>
<!-- This site is optimized with the Yoast SEO plugin v11.0 - https://yoast.com/wordpress/plugins/seo/ -->
<link rel="canonical" href="http://lednique.com/tag/high-side/" />
<meta property="og:locale" content="en_GB" />
<meta property="og:type" content="object" />
<meta property="og:title" content="high-side Archives | LEDnique" />
<meta property="og:url" content="http://lednique.com/tag/high-side/" />
<meta property="og:site_name" content="LEDnique" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="high-side Archives | LEDnique" />
<script type='application/ld+json' class='yoast-schema-graph yoast-schema-graph--main'>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"http://lednique.com/#organization","name":"LEDnique","url":"http://lednique.com/","sameAs":["https://www.youtube.com/channel/UCtrtzifOM0hCiXOQsFXCy6A"],"logo":{"@type":"ImageObject","@id":"http://lednique.com/#logo","url":"http://lednique.com/wp/wp-content/uploads/2016/09/cropped-LEDnique_logo_01_512x512-1.png","caption":"LEDnique"},"image":{"@id":"http://lednique.com/#logo"}},{"@type":"WebSite","@id":"http://lednique.com/#website","url":"http://lednique.com/","name":"LEDnique","publisher":{"@id":"http://lednique.com/#organization"},"potentialAction":{"@type":"SearchAction","target":"http://lednique.com/?s={search_term_string}","query-input":"required name=search_term_string"}},{"@type":"CollectionPage","@id":"http://lednique.com/tag/high-side/#webpage","url":"http://lednique.com/tag/high-side/","inLanguage":"en-GB","name":"high-side Archives | LEDnique","isPartOf":{"@id":"http://lednique.com/#website"}}]}</script>
<!-- / Yoast SEO plugin. -->

<link rel='dns-prefetch' href='//w.sharethis.com' />
<link rel='dns-prefetch' href='//fonts.googleapis.com' />
<link rel='dns-prefetch' href='//maxcdn.bootstrapcdn.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="LEDnique &raquo; Feed" href="http://lednique.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="LEDnique &raquo; Comments Feed" href="http://lednique.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="LEDnique &raquo; high-side Tag Feed" href="http://lednique.com/tag/high-side/feed/" />
<!-- This site uses the Google Analytics by MonsterInsights plugin v7.15.1 - Using Analytics tracking - https://www.monsterinsights.com/ -->
<script type="text/javascript" data-cfasync="false">
    (window.gaDevIds=window.gaDevIds||[]).push("dZGIzZG");
	var mi_version         = '7.15.1';
	var mi_track_user      = true;
	var mi_no_track_reason = '';
	
	var disableStr = 'ga-disable-UA-39375012-1';

	/* Function to detect opted out users */
	function __gaTrackerIsOptedOut() {
		return document.cookie.indexOf(disableStr + '=true') > -1;
	}

	/* Disable tracking if the opt-out cookie exists. */
	if ( __gaTrackerIsOptedOut() ) {
		window[disableStr] = true;
	}

	/* Opt-out function */
	function __gaTrackerOptout() {
	  document.cookie = disableStr + '=true; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/';
	  window[disableStr] = true;
	}

	if ( 'undefined' === typeof gaOptout ) {
		function gaOptout() {
			__gaTrackerOptout();
		}
	}
	
	if ( mi_track_user ) {
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','__gaTracker');

		__gaTracker('create', 'UA-39375012-1', 'auto');
		__gaTracker('set', 'forceSSL', true);
		__gaTracker('require', 'displayfeatures');
		__gaTracker('send','pageview');
	} else {
		console.log( "" );
		(function() {
			/* https://developers.google.com/analytics/devguides/collection/analyticsjs/ */
			var noopfn = function() {
				return null;
			};
			var noopnullfn = function() {
				return null;
			};
			var Tracker = function() {
				return null;
			};
			var p = Tracker.prototype;
			p.get = noopfn;
			p.set = noopfn;
			p.send = noopfn;
			var __gaTracker = function() {
				var len = arguments.length;
				if ( len === 0 ) {
					return;
				}
				var f = arguments[len-1];
				if ( typeof f !== 'object' || f === null || typeof f.hitCallback !== 'function' ) {
					console.log( 'Not running function __gaTracker(' + arguments[0] + " ....) because you are not being tracked. " + mi_no_track_reason );
					return;
				}
				try {
					f.hitCallback();
				} catch (ex) {

				}
			};
			__gaTracker.create = function() {
				return new Tracker();
			};
			__gaTracker.getByName = noopnullfn;
			__gaTracker.getAll = function() {
				return [];
			};
			__gaTracker.remove = noopfn;
			window['__gaTracker'] = __gaTracker;
					})();
		}
</script>
<!-- / Google Analytics by MonsterInsights -->
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11.2.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11.2.0\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/lednique.com\/wp\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.1.8"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56760,9792,65039],[55358,56760,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='wp-block-library-css'  href='http://lednique.com/wp/wp-includes/css/dist/block-library/style.min.css?ver=5.1.8' type='text/css' media='all' />
<link rel='stylesheet' id='contact-form-7-css'  href='http://lednique.com/wp/wp-content/plugins/contact-form-7/includes/css/styles.css?ver=5.0.5' type='text/css' media='all' />
<link rel='stylesheet' id='simple-share-buttons-adder-indie-css'  href='//fonts.googleapis.com/css?family=Indie+Flower&#038;ver=5.1.8' type='text/css' media='all' />
<link rel='stylesheet' id='simple-share-buttons-adder-font-awesome-css'  href='//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css?ver=5.1.8' type='text/css' media='all' />
<link rel='stylesheet' id='wpctc_wpctc-css'  href='http://lednique.com/wp/wp-content/plugins/wp-category-tag-could/css/wpctc.min.css?ver=1.7.1' type='text/css' media='all' />
<link rel='stylesheet' id='child-pages-shortcode-css-css'  href='http://lednique.com/wp/wp-content/plugins/child-pages-shortcode/css/child-pages-shortcode.min.css?ver=1.1.4' type='text/css' media='all' />
<link rel='stylesheet' id='monsterinsights-popular-posts-style-css'  href='http://lednique.com/wp/wp-content/plugins/google-analytics-for-wordpress/assets/css/frontend.min.css?ver=7.15.1' type='text/css' media='all' />
<link rel='stylesheet' id='twentysixteen-fonts-css'  href='https://fonts.googleapis.com/css?family=Merriweather%3A400%2C700%2C900%2C400italic%2C700italic%2C900italic%7CMontserrat%3A400%2C700%7CInconsolata%3A400&#038;subset=latin%2Clatin-ext' type='text/css' media='all' />
<link rel='stylesheet' id='genericons-css'  href='http://lednique.com/wp/wp-content/themes/twentysixteen/genericons/genericons.css?ver=3.4.1' type='text/css' media='all' />
<link rel='stylesheet' id='twentysixteen-style-css'  href='http://lednique.com/wp/wp-content/themes/twentysixteen/style.css?ver=5.1.8' type='text/css' media='all' />
<style id='twentysixteen-style-inline-css' type='text/css'>

		/* Custom Link Color */
		.menu-toggle:hover,
		.menu-toggle:focus,
		a,
		.main-navigation a:hover,
		.main-navigation a:focus,
		.dropdown-toggle:hover,
		.dropdown-toggle:focus,
		.social-navigation a:hover:before,
		.social-navigation a:focus:before,
		.post-navigation a:hover .post-title,
		.post-navigation a:focus .post-title,
		.tagcloud a:hover,
		.tagcloud a:focus,
		.site-branding .site-title a:hover,
		.site-branding .site-title a:focus,
		.entry-title a:hover,
		.entry-title a:focus,
		.entry-footer a:hover,
		.entry-footer a:focus,
		.comment-metadata a:hover,
		.comment-metadata a:focus,
		.pingback .comment-edit-link:hover,
		.pingback .comment-edit-link:focus,
		.comment-reply-link,
		.comment-reply-link:hover,
		.comment-reply-link:focus,
		.required,
		.site-info a:hover,
		.site-info a:focus {
			color: #0e7201;
		}

		mark,
		ins,
		button:hover,
		button:focus,
		input[type="button"]:hover,
		input[type="button"]:focus,
		input[type="reset"]:hover,
		input[type="reset"]:focus,
		input[type="submit"]:hover,
		input[type="submit"]:focus,
		.pagination .prev:hover,
		.pagination .prev:focus,
		.pagination .next:hover,
		.pagination .next:focus,
		.widget_calendar tbody a,
		.page-links a:hover,
		.page-links a:focus {
			background-color: #0e7201;
		}

		input[type="date"]:focus,
		input[type="time"]:focus,
		input[type="datetime-local"]:focus,
		input[type="week"]:focus,
		input[type="month"]:focus,
		input[type="text"]:focus,
		input[type="email"]:focus,
		input[type="url"]:focus,
		input[type="password"]:focus,
		input[type="search"]:focus,
		input[type="tel"]:focus,
		input[type="number"]:focus,
		textarea:focus,
		.tagcloud a:hover,
		.tagcloud a:focus,
		.menu-toggle:hover,
		.menu-toggle:focus {
			border-color: #0e7201;
		}

		@media screen and (min-width: 56.875em) {
			.main-navigation li:hover > a,
			.main-navigation li.focus > a {
				color: #0e7201;
			}
		}
	
</style>
<!--[if lt IE 10]>
<link rel='stylesheet' id='twentysixteen-ie-css'  href='http://lednique.com/wp/wp-content/themes/twentysixteen/css/ie.css?ver=20160816' type='text/css' media='all' />
<![endif]-->
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentysixteen-ie8-css'  href='http://lednique.com/wp/wp-content/themes/twentysixteen/css/ie8.css?ver=20160816' type='text/css' media='all' />
<![endif]-->
<!--[if lt IE 8]>
<link rel='stylesheet' id='twentysixteen-ie7-css'  href='http://lednique.com/wp/wp-content/themes/twentysixteen/css/ie7.css?ver=20160816' type='text/css' media='all' />
<![endif]-->
<script type='text/javascript'>
/* <![CDATA[ */
var monsterinsights_frontend = {"js_events_tracking":"true","download_extensions":"doc,pdf,ppt,zip,xls,docx,pptx,xlsx","inbound_paths":"[]","home_url":"http:\/\/lednique.com","hash_tracking":"false"};
/* ]]> */
</script>
<script type='text/javascript' src='http://lednique.com/wp/wp-content/plugins/google-analytics-for-wordpress/assets/js/frontend.min.js?ver=7.15.1'></script>
<script type='text/javascript' src='http://lednique.com/wp/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='http://lednique.com/wp/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<script id='st_insights_js' type='text/javascript' src='http://w.sharethis.com/button/st_insights.js?publisher=4d48b7c5-0ae3-43d4-bfbe-3ff8c17a8ae6&#038;product=simpleshare'></script>
<script type='text/javascript' src='http://lednique.com/wp/wp-content/plugins/child-pages-shortcode/js/child-pages-shortcode.min.js?ver=1.1.4'></script>
<!--[if lt IE 9]>
<script type='text/javascript' src='http://lednique.com/wp/wp-content/themes/twentysixteen/js/html5.js?ver=3.7.3'></script>
<![endif]-->
<link rel='https://api.w.org/' href='http://lednique.com/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://lednique.com/wp/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://lednique.com/wp/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 5.1.8" />

<script type='text/javascript' src='http://lednique.com/wp/wp-content/uploads/custom-css-js/626.js?v=573'></script>
<link rel="icon" href="http://lednique.com/wp/wp-content/uploads/2016/09/cropped-LEDnique_logo_01_512x512-32x32.png" sizes="32x32" />
<link rel="icon" href="http://lednique.com/wp/wp-content/uploads/2016/09/cropped-LEDnique_logo_01_512x512-192x192.png" sizes="192x192" />
<link rel="apple-touch-icon-precomposed" href="http://lednique.com/wp/wp-content/uploads/2016/09/cropped-LEDnique_logo_01_512x512-180x180.png" />
<meta name="msapplication-TileImage" content="http://lednique.com/wp/wp-content/uploads/2016/09/cropped-LEDnique_logo_01_512x512-270x270.png" />
		<style type="text/css" id="wp-custom-css">
			/*
You can add your own CSS here.

Click the help icon above to learn more.
*/

/* https://css-tricks.com/minimum-paragraph-widths/ */
p:before {
  content: "";
  width: 10em;
  display: block;
  overflow: hidden;
  /* For Demonstration */
  border: 0px solid green;
}

/* Series of mods based on https://allaboutbasic.com/2016/01/15/wordpress-twenty-sixteen-2016-theme-modifications-change-colors-titles-metassidebar-fontsheaderfooter-menus-etc-using-css/ */

#masthead {
  padding-top: 0px !important;
  padding-bottom: 12px !important;
}

site-title a {
color: red !important;
font-family: times new roman !important;
}
.site-title {
font-size: 34px !important;
}

/* LEDnique */
body {
// font-family: sans-serif !important;
}		</style>
		</head>

<body class="archive tag tag-high-side tag-36 hfeed">
<div id="page" class="site">
	<div class="site-inner">
		<a class="skip-link screen-reader-text" href="#content">Skip to content</a>

		<header id="masthead" class="site-header" role="banner">
			<div class="site-header-main">
				<div class="site-branding">
					
											<p class="site-title"><a href="http://lednique.com/" rel="home">LEDnique</a></p>
											<p class="site-description">Practical electronic circuits and theory for LEDs and power.</p>
									</div><!-- .site-branding -->

							</div><!-- .site-header-main -->

											<div class="header-image">
					<a href="http://lednique.com/" rel="home">
						<img src="http://lednique.com/wp/wp-content/uploads/2016/09/LEDnique_banner_1200x120-1.png" srcset="http://lednique.com/wp/wp-content/uploads/2016/09/LEDnique_banner_1200x120-1-300x30.png 300w, http://lednique.com/wp/wp-content/uploads/2016/09/LEDnique_banner_1200x120-1-768x77.png 768w, http://lednique.com/wp/wp-content/uploads/2016/09/LEDnique_banner_1200x120-1-1024x102.png 1024w, http://lednique.com/wp/wp-content/uploads/2016/09/LEDnique_banner_1200x120-1.png 1200w" sizes="(max-width: 709px) 85vw, (max-width: 909px) 81vw, (max-width: 1362px) 88vw, 1200px" width="1200" height="120" alt="LEDnique">
					</a>
				</div><!-- .header-image -->
					</header><!-- .site-header -->

		<div id="content" class="site-content">

	<div id="primary" class="content-area">
		<main id="main" class="site-main" role="main">

		
			<header class="page-header">
				<h1 class="page-title">Tag: high-side</h1>			</header><!-- .page-header -->

			
<article id="post-246" class="post-246 page type-page status-publish hentry tag-gpio tag-high-side tag-led tag-pnp tag-protection-diodes">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="http://lednique.com/gpio-high-side-driver-fail/" rel="bookmark">GPIO high-side driver fail</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<figure id="attachment_248" aria-describedby="caption-attachment-248" style="width: 294px" class="wp-caption aligncenter"><img class="size-full wp-image-248" src="http://lednique.com/wp/wp-content/uploads/2016/09/GPIO-driving-PNP-and-LED-fail-unmarked.png" alt="LED PNP high-side bad design." width="294" height="252" /><figcaption id="caption-attachment-248" class="wp-caption-text">Figure 1. On the face of it, this looks like a reasonable means of achieving a high-side switch. But watch those diodes!</figcaption></figure>
<p>The NPN common emitter configuration makes it easy to make a low-side to switch loads connecte to positive supply. It seems logical to assume that a PNP transistor could provide a mirrored circuit to make a simple high-side switch. The circuit of Figure 1 will work fine provided that \( V_{SS} \leq V_{MICRO} \) (or whatever voltage the micro is running on).</p>
<figure id="attachment_247" aria-describedby="caption-attachment-247" style="width: 285px" class="wp-caption aligncenter"><img class="size-full wp-image-247" src="http://lednique.com/wp/wp-content/uploads/2016/09/GPIO-driving-PNP-and-LED-fail.png" alt="PNP high-side fail." width="285" height="244" /><figcaption id="caption-attachment-247" class="wp-caption-text">Figure 2. The protection diodes on most logic chips creates a sneak-path to positive supply. This will keep the PNP transistor permanently turned on and may damage the chip.</figcaption></figure>
<p>If If  \( V_{SS} &gt; V_{MICRO} \) then the output protection diodes built into the chip provide a sneak path for the base current. The e-b junction of Q1 will be forward biased and current will flow through it, R1 and D1 to the micro supply. Q1 will turn on and LED will light and will not switch off.</p>
<p>We can fix this at the expense of adding an NPN low-side switch.</p>
<figure id="attachment_254" aria-describedby="caption-attachment-254" style="width: 390px" class="wp-caption aligncenter"><img class="size-full wp-image-254" src="http://lednique.com/wp/wp-content/uploads/2016/09/GPIO-driving-PNP-and-LED-high-side-success.png" alt="NPN-PNP high-side driver." width="390" height="289" /><figcaption id="caption-attachment-254" class="wp-caption-text">Figure 3. To drive a high-side transistor from a GPIO pin we need a level translator. An NPN transistor does the job nicely.</figcaption></figure>
<p>In Figure 3 the micro drives Q2 as in a normal NPN low-side switch. When Q2 is turned on current will flow from the base of Q1, through R1 and Q2 to ground. Q1 will turn on and the LED will light.</p>
<figure id="attachment_351" aria-describedby="caption-attachment-351" style="width: 404px" class="wp-caption aligncenter"><img class="size-full wp-image-351" src="http://lednique.com/wp/wp-content/uploads/2016/09/GPIO-hi-side-opto.png" alt="" width="404" height="309" srcset="http://lednique.com/wp/wp-content/uploads/2016/09/GPIO-hi-side-opto.png 404w, http://lednique.com/wp/wp-content/uploads/2016/09/GPIO-hi-side-opto-300x229.png 300w" sizes="(max-width: 404px) 85vw, 404px" /><figcaption id="caption-attachment-351" class="wp-caption-text">Figure 4. An opto-isolated high-side driver.</figcaption></figure>
<p>In Figure 4 the problem has been solved by using an opto-isolator. Now there is no chance of the 12 V supply back-feeding into the micro.</p>
<p>Note that in this example the grounds are common between the two circuits. They could, however, be separated for complete isolation. See &#8220;A basic application&#8221; on <a href="http://lednique.com/opto-isolators-2/opto-isolators/">Opto-isolators &#8211; intro</a> for an example.</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
					</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-210" class="post-210 page type-page status-publish has-post-thumbnail hentry tag-high-side tag-led tag-logic tag-low-side tag-resistance">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="http://lednique.com/gpio-tricks/interfacing-with-logic/" rel="bookmark">High-side versus low-side switching</a></h2>	</header><!-- .entry-header -->

	
	
	<a class="post-thumbnail" href="http://lednique.com/gpio-tricks/interfacing-with-logic/" aria-hidden="true">
		<img width="277" height="278" src="http://lednique.com/wp/wp-content/uploads/2016/09/Output-stage-simplified.png" class="attachment-post-thumbnail size-post-thumbnail wp-post-image" alt="High-side versus low-side switching" srcset="http://lednique.com/wp/wp-content/uploads/2016/09/Output-stage-simplified.png 277w, http://lednique.com/wp/wp-content/uploads/2016/09/Output-stage-simplified-150x150.png 150w" sizes="(max-width: 709px) 85vw, (max-width: 909px) 67vw, (max-width: 984px) 60vw, (max-width: 1362px) 62vw, 840px" />	</a>

	
	<div class="entry-content">
		<figure id="attachment_227" aria-describedby="caption-attachment-227" style="width: 277px" class="wp-caption alignleft"><img class="size-full wp-image-227" src="http://lednique.com/wp/wp-content/uploads/2016/09/Output-stage-simplified.png" alt="Simplified logic output." width="277" height="278" srcset="http://lednique.com/wp/wp-content/uploads/2016/09/Output-stage-simplified.png 277w, http://lednique.com/wp/wp-content/uploads/2016/09/Output-stage-simplified-150x150.png 150w" sizes="(max-width: 277px) 85vw, 277px" /><figcaption id="caption-attachment-227" class="wp-caption-text">Figure 1. Simplified logic output stage showing the high-side and low-side switches.</figcaption></figure>
<p>Most micro-controllers and logic families have output stages which can connect the output to the positive supply or to ground. This allows the micro to put a definite &#8216;high&#8217; (+5 V in this example) onto the output or a definite &#8216;low&#8217; (ground) rather than let it float which could cause problems if the output is feeding into another device. Naturally, only one of the switches should be closed at any time. In this article we look at high-side versus low-side switching.</p>
<figure id="attachment_213" aria-describedby="caption-attachment-213" style="width: 365px" class="wp-caption alignleft"><img class="size-full wp-image-213" src="http://lednique.com/wp/wp-content/uploads/2016/09/GPIO-driving-LED-to-GND.png" alt="GPIO sourcing current for LED." width="365" height="145" srcset="http://lednique.com/wp/wp-content/uploads/2016/09/GPIO-driving-LED-to-GND.png 365w, http://lednique.com/wp/wp-content/uploads/2016/09/GPIO-driving-LED-to-GND-300x119.png 300w" sizes="(max-width: 365px) 85vw, 365px" /><figcaption id="caption-attachment-213" class="wp-caption-text">Figure 2. To power an LED connected to ground the micro simply connects the output to positive supply. In this configuration we use the upper transistor in the output stage to supply current to the output &#8211; much in the same way as S1 in the equivalent circuit.</figcaption></figure>
<p>Most micros can now source 10 to 20 mA safely on their GPIO<span id='easy-footnote-1-210' class='easy-footnote-margin-adjust'></span><span class='easy-footnote'><a href='http://lednique.com/gpio-tricks/interfacing-with-logic/#easy-footnote-bottom-1-210' title='GPIO = general-purpose input/output.'><sup>1</sup></a></span> pins. This is ample current to light an LED brightly. All that is require is to decide whether to source current for the LED or sink current.</p>
<figure id="attachment_217" aria-describedby="caption-attachment-217" style="width: 360px" class="wp-caption alignleft"><img class="size-full wp-image-217" src="http://lednique.com/wp/wp-content/uploads/2016/09/GPIO-sinking-LED-to-GND.png" alt="Micro sinking current from LED." width="360" height="147" srcset="http://lednique.com/wp/wp-content/uploads/2016/09/GPIO-sinking-LED-to-GND.png 360w, http://lednique.com/wp/wp-content/uploads/2016/09/GPIO-sinking-LED-to-GND-300x123.png 300w" sizes="(max-width: 360px) 85vw, 360px" /><figcaption id="caption-attachment-217" class="wp-caption-text">Figure 3. To power an LED connected to positive supply the micro simply connects the output to ground. In this configuration we use the lower transistor in the output stage to sink current from the LED to ground &#8211; much in the same way as S1 in the equivalent circuit.</figcaption></figure>
<p>&nbsp;</p>
<h2>Some more detail</h2>
<p>The switches in real devices will be constructed with transistors. These are imperfect and have various limits that we have to be aware of, such as maximum current and source resistance. For example, the <a href="http://www.atmel.com/Images/Atmel-42735-8-bit-AVR-Microcontroller-ATmega328-328P_datasheet.pdf">ATmega328P</a> used in the <a href="http://arduino.cc">Arduino Uno</a> states that the IO pins can handle up to 40 mA subject to a maximum total of 200 mA for the whole chip.</p>
<figure id="attachment_228" aria-describedby="caption-attachment-228" style="width: 700px" class="wp-caption aligncenter"><img class="size-full wp-image-228" src="http://lednique.com/wp/wp-content/uploads/2016/09/Atmel-ATmega328P-absolute-max-ratings.png" alt="ATmega328 maximum current ratings." width="700" height="364" srcset="http://lednique.com/wp/wp-content/uploads/2016/09/Atmel-ATmega328P-absolute-max-ratings.png 700w, http://lednique.com/wp/wp-content/uploads/2016/09/Atmel-ATmega328P-absolute-max-ratings-300x156.png 300w" sizes="(max-width: 700px) 85vw, 700px" /><figcaption id="caption-attachment-228" class="wp-caption-text">Figure 4. The absolute maximum current handling capability of the ATmega328 and 328P micro.</figcaption></figure>
<figure id="attachment_229" aria-describedby="caption-attachment-229" style="width: 714px" class="wp-caption alignleft"><img class="size-full wp-image-229" src="http://lednique.com/wp/wp-content/uploads/2016/09/ATmega328_P-output-voltages.png" alt="At 20 mA the ATmega328P output is pulled up to 0.9 V above zero when low and about 0.8 V below positive supply when high." width="714" height="449" srcset="http://lednique.com/wp/wp-content/uploads/2016/09/ATmega328_P-output-voltages.png 714w, http://lednique.com/wp/wp-content/uploads/2016/09/ATmega328_P-output-voltages-300x189.png 300w" sizes="(max-width: 714px) 85vw, 714px" /><figcaption id="caption-attachment-229" class="wp-caption-text">Figure 5. At 20 mA the ATmega328P output is pulled up to 0.9 V above zero when low and about 0.8 V below positive supply when high.</figcaption></figure>
<p>Note on Figure 5 the \(V_{OL}\) voltage &#8211; the actual voltage measurable on the output pin (red) &#8211; when switched low and sinking 20 mA that the voltage won&#8217;t be zero as might be expected but could be as much as 0.9 V above ground. This is due to the voltage drop across the low-side transistor switch in the output.</p>
<p>Similarly, when the output is switched high and sourcing 20 mA the output won&#8217;t be +5 V (the test condition power supply voltage) but could be as much as 0.8 V below that.</p>
<p>It&#8217;s worth being aware of this as it could be significant in some low-voltage applications where there isn&#8217;t much &#8220;headroom&#8221; between the voltage required by the LED and that of the power supply.</p>
<h2>Example 1 &#8211; 5 V supply</h2>
<figure id="attachment_218" aria-describedby="caption-attachment-218" style="width: 477px" class="wp-caption aligncenter"><img class="size-full wp-image-218" src="http://lednique.com/wp/wp-content/uploads/2016/09/IV-LED-and-R-20-mA-G.png" alt="LED IV curve and calculation." width="477" height="458" /><figcaption id="caption-attachment-218" class="wp-caption-text">Figure 3. Using the LED IV curves to find the required R value for a green LED at 20 mA.</figcaption></figure>
<p>Figure 6 shows that the LED at 20 mA will have a forward voltage drop of about 2.2 V. If the supply voltage is 5 V then the resistor has to drop \(5 &#8211; 2.2 = 2.8\,\mathrm V \). The required value is \( R = \frac {V}{I} = \frac {2.8}{0.02} = 140\,\Omega \). The nearest standard value of 150 Ω will do fine.</p>
<p>The resistance calculation will be the same for the current sinking option of Figure 2.</p>
<h2>Example 2 &#8211; 3.3 V supply</h2>
<p>When running from a 3.3 V supply the headroom becomes substantially limited.</p>
<figure id="attachment_230" aria-describedby="caption-attachment-230" style="width: 470px" class="wp-caption aligncenter"><img class="size-full wp-image-230" src="http://lednique.com/wp/wp-content/uploads/2016/09/IV-LED-and-R-20-mA-G-3.3-V.png" alt="As the supply voltage is decreased to 3.3 V the &quot;headroom&quot; for driving an LED is reduced and, when output droop is taken into consideration, the device may not be able to provide enough current." width="470" height="454" srcset="http://lednique.com/wp/wp-content/uploads/2016/09/IV-LED-and-R-20-mA-G-3.3-V.png 470w, http://lednique.com/wp/wp-content/uploads/2016/09/IV-LED-and-R-20-mA-G-3.3-V-300x290.png 300w" sizes="(max-width: 470px) 85vw, 470px" /><figcaption id="caption-attachment-230" class="wp-caption-text">As the supply voltage is decreased to 3.3 V the &#8220;headroom&#8221; for driving an LED is reduced and, when output droop is taken into consideration, the device may not be able to provide enough current.</figcaption></figure>
<p>Here we can see that the LED is still requiring 2.2 V leaving 3.3 &#8211; 2.2 = 1.1  V for the resistor. If this 3.3 V chip&#8217;s output were to droop by, say, 0.5 V then that leaves us with only 0.6 V for the resistor: \( R = \frac {V}{I} = \frac {0.6}{0.02} = 30\,\Omega \).</p>
<p>The problem with this is that a low-value resistor is not a very good constant current source. If the forward voltage, \( V_F \) of the LED decreased by 0.1 V due to temperature or batch to batch variation then the voltage would go to 0.7 V and <em>I</em> would increase from 20 mA to \( I = \frac {V}{R} = \frac {0.7}{30} = 23\,\mathrm mA \). This might push the device a little closer to the absolute maximum ratings.</p>
<p>See all <a href="http://lednique.com/gpio-tricks/">GPIO tricks</a>.</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
					</footer><!-- .entry-footer -->
</article><!-- #post-## -->

		</main><!-- .site-main -->
	</div><!-- .content-area -->


	<aside id="secondary" class="sidebar widget-area" role="complementary">
		<section id="search-2" class="widget widget_search">
<form role="search" method="get" class="search-form" action="http://lednique.com/">
	<label>
		<span class="screen-reader-text">Search for:</span>
		<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" />
	</label>
	<button type="submit" class="search-submit"><span class="screen-reader-text">Search</span></button>
</form>
</section><section id="text-2" class="widget widget_text">			<div class="textwidget"><p><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><br />
<!-- LEDnique sidebar --><br />
<ins class="adsbygoogle"
     style="display:inline-block;width:300px;height:600px"
     data-ad-client="ca-pub-7000720885522141"
     data-ad-slot="1906477882"></ins><br />
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></p>
</div>
		</section><section id="pages-2" class="widget widget_pages"><h2 class="widget-title">Pages</h2>		<ul>
			<li class="page_item page-item-177"><a href="http://lednique.com/battery-plus-led-without-resistor/">Battery and LED without resistor</a></li>
<li class="page_item page-item-507 page_item_has_children"><a href="http://lednique.com/bulbs/">Bulbs</a>
<ul class='children'>
	<li class="page_item page-item-537"><a href="http://lednique.com/bulbs/dimmers-for-leds/">Dimmable mains LED bulbs</a></li>
	<li class="page_item page-item-510"><a href="http://lednique.com/bulbs/led-filament-lamps/">LED filament lamps</a></li>
	<li class="page_item page-item-502"><a href="http://lednique.com/bulbs/leds-for-cars/">LEDs for cars and trucks</a></li>
</ul>
</li>
<li class="page_item page-item-6"><a href="http://lednique.com/contact-us/">Contact Us</a></li>
<li class="page_item page-item-670 page_item_has_children"><a href="http://lednique.com/current-voltage-relationships/">Current and voltage relationships</a>
<ul class='children'>
	<li class="page_item page-item-517"><a href="http://lednique.com/current-voltage-relationships/resistance-of-an-led/">&#8216;Resistance&#8217; of an LED</a></li>
	<li class="page_item page-item-90"><a href="http://lednique.com/current-voltage-relationships/iv-curves/">IV curves</a></li>
	<li class="page_item page-item-544"><a href="http://lednique.com/current-voltage-relationships/loadline-resistance-graphic-tool/">Loadline resistance graphic tool</a></li>
	<li class="page_item page-item-555"><a href="http://lednique.com/current-voltage-relationships/variations-vf-binning/">Variations in Vf and &#8220;binning&#8221;</a></li>
</ul>
</li>
<li class="page_item page-item-640 page_item_has_children"><a href="http://lednique.com/display-technology/">Display technology</a>
<ul class='children'>
	<li class="page_item page-item-634"><a href="http://lednique.com/display-technology/1602-lcd-backlight-led/">1602 LCD backlight LED</a></li>
	<li class="page_item page-item-263"><a href="http://lednique.com/display-technology/7-segment-display-basics/">7-segment display basics</a></li>
	<li class="page_item page-item-402"><a href="http://lednique.com/display-technology/alphanumeric-led-displays/">Alphanumeric LED displays</a></li>
	<li class="page_item page-item-140"><a href="http://lednique.com/display-technology/multiplexed-display/">Multiplexed display &#8211; the basics</a></li>
</ul>
</li>
<li class="page_item page-item-212"><a href="http://lednique.com/driving-leds-on-higher-voltage/">Driving LEDs on higher voltage</a></li>
<li class="page_item page-item-152 page_item_has_children"><a href="http://lednique.com/electrical-theory-basics/">Electrical theory &#8211; basics</a>
<ul class='children'>
	<li class="page_item page-item-66"><a href="http://lednique.com/electrical-theory-basics/ohms-law-and-resistor-calculation/">Ohm&#8217;s law &#8211; LED resistor calculation</a></li>
	<li class="page_item page-item-162"><a href="http://lednique.com/electrical-theory-basics/power-calculations/">Power calculations</a></li>
</ul>
</li>
<li class="page_item page-item-246"><a href="http://lednique.com/gpio-high-side-driver-fail/">GPIO high-side driver fail</a></li>
<li class="page_item page-item-145 page_item_has_children"><a href="http://lednique.com/gpio-tricks/">GPIO tricks</a>
<ul class='children'>
	<li class="page_item page-item-109"><a href="http://lednique.com/gpio-tricks/1-gpio-dual-led-common-cathode/">1 GPIO, bi-colour LED, common cathode</a></li>
	<li class="page_item page-item-112"><a href="http://lednique.com/gpio-tricks/1-gpio-bi-colour-2-pin-led/">1 GPIO, bi-colour, 2-pin LED</a></li>
	<li class="page_item page-item-118"><a href="http://lednique.com/gpio-tricks/2-gpio-1-bi-colour-2-pin-led/">2 GPIO, 1 bi-colour 2-pin LED</a></li>
	<li class="page_item page-item-210"><a href="http://lednique.com/gpio-tricks/interfacing-with-logic/">High-side versus low-side switching</a></li>
	<li class="page_item page-item-101"><a href="http://lednique.com/gpio-tricks/1-gpio-multiple-leds/">One switch or GPIO / multiple LEDs</a></li>
</ul>
</li>
<li class="page_item page-item-659"><a href="http://lednique.com/ground-earth-chassis/">Ground, earth and chassis explained</a></li>
<li class="page_item page-item-4"><a href="http://lednique.com/">LED circuits, theory, applications and tips</a></li>
<li class="page_item page-item-207"><a href="http://lednique.com/led-lead-lengths/">LED lead lengths</a></li>
<li class="page_item page-item-192"><a href="http://lednique.com/leds-with-more-than-two-pins/">LED pinouts &#8211; 2, 3, 4-pin and more</a></li>
<li class="page_item page-item-81"><a href="http://lednique.com/datasheet-current/">LED rated current</a></li>
<li class="page_item page-item-493"><a href="http://lednique.com/led-speed/">LED speed</a></li>
<li class="page_item page-item-722"><a href="http://lednique.com/leds-and-colour/">LEDs and colour</a></li>
<li class="page_item page-item-285"><a href="http://lednique.com/miscellaneous-lamp-info/">Miscellaneous lamp info</a></li>
<li class="page_item page-item-300 page_item_has_children"><a href="http://lednique.com/opto-isolators-2/">Opto-isolators</a>
<ul class='children'>
	<li class="page_item page-item-302"><a href="http://lednique.com/opto-isolators-2/diy-opto-isolator/">DIY opto-isolator</a></li>
	<li class="page_item page-item-442"><a href="http://lednique.com/opto-isolators-2/light-dependent-resistor-ldr/">Light dependent resistor (LDR)</a></li>
	<li class="page_item page-item-289"><a href="http://lednique.com/opto-isolators-2/opto-isolators/">Opto-isolators &#8211; intro</a></li>
	<li class="page_item page-item-458"><a href="http://lednique.com/opto-isolators-2/opto-triacs-zero-cross-work/">Opto-triacs, solid-state relays (SSR), zero-cross and how they work</a></li>
</ul>
</li>
<li class="page_item page-item-128"><a href="http://lednique.com/parallel-leds/">Parallel LEDs &#8211; the problem</a></li>
<li class="page_item page-item-567 page_item_has_children"><a href="http://lednique.com/power-supplies/">Power supplies</a>
<ul class='children'>
	<li class="page_item page-item-715"><a href="http://lednique.com/power-supplies/al5809-constant-current-driver/">AL5809 constant current driver</a></li>
	<li class="page_item page-item-602"><a href="http://lednique.com/power-supplies/dimmable-mains-psu-control/">Dimmable mains PSU control</a></li>
	<li class="page_item page-item-579"><a href="http://lednique.com/power-supplies/gpio-voltage-booster/">GPIO voltage booster</a></li>
	<li class="page_item page-item-573"><a href="http://lednique.com/power-supplies/lm317-constant-current-power-supply/">LM317 constant-current power supply</a></li>
	<li class="page_item page-item-564"><a href="http://lednique.com/power-supplies/simple-constant-current-driver/">Simple constant-current driver</a></li>
</ul>
</li>
<li class="page_item page-item-54"><a href="http://lednique.com/rgb-led/">RGB LED</a></li>
<li class="page_item page-item-174 page_item_has_children"><a href="http://lednique.com/technology-basics/">Technology &#8211; basics</a>
<ul class='children'>
	<li class="page_item page-item-524"><a href="http://lednique.com/technology-basics/failure-modes-leds/">Failure modes for LEDs</a></li>
	<li class="page_item page-item-29"><a href="http://lednique.com/technology-basics/flexible-led-strip-light/">Flexible LED strip light basics</a></li>
	<li class="page_item page-item-157"><a href="http://lednique.com/technology-basics/bulb-basics/">Light bulb</a></li>
</ul>
</li>
<li class="page_item page-item-185 page_item_has_children"><a href="http://lednique.com/test-equipment/">Test equipment</a>
<ul class='children'>
	<li class="page_item page-item-187"><a href="http://lednique.com/test-equipment/multimeter/">Multimeter</a></li>
	<li class="page_item page-item-479"><a href="http://lednique.com/test-equipment/simple-stepper-motor-test-using-led/">Simple stepper-motor test using LED</a></li>
	<li class="page_item page-item-370"><a href="http://lednique.com/test-equipment/test-infrared-led/">Test infrared LEDs using a camera phone</a></li>
	<li class="page_item page-item-530"><a href="http://lednique.com/test-equipment/testing-unknown-leds/">Testing unknown LEDs</a></li>
</ul>
</li>
<li class="page_item page-item-14"><a href="http://lednique.com/what-is-an-led/">What is an LED</a></li>
		</ul>
			</section><section id="categories-2" class="widget widget_categories"><h2 class="widget-title">Categories</h2>		<ul>
			<li class="cat-item-none">No categories</li>		</ul>
			</section><section id="meta-2" class="widget widget_meta"><h2 class="widget-title">Meta</h2>			<ul>
						<li><a rel="nofollow" href="http://lednique.com/wp/wp-login.php">Log in</a></li>
			<li><a href="http://lednique.com/feed/">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://lednique.com/comments/feed/">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="https://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress.org</a></li>			</ul>
			</section>	</aside><!-- .sidebar .widget-area -->

		</div><!-- .site-content -->

		<footer id="colophon" class="site-footer" role="contentinfo">
			
			
			<div class="site-info">
								<span class="site-title"><a href="http://lednique.com/" rel="home">LEDnique</a></span>
								<a href="https://wordpress.org/" class="imprint">
					Proudly powered by WordPress				</a>
			</div><!-- .site-info -->
		</footer><!-- .site-footer -->
	</div><!-- .site-inner -->
</div><!-- .site -->

<link rel='stylesheet' id='qtipstyles-css'  href='http://lednique.com/wp/wp-content/plugins/easy-footnotes/assets/qtip/jquery.qtip.min.css?ver=3.0.3' type='text/css' media='' />
<link rel='stylesheet' id='easyfootnotescss-css'  href='http://lednique.com/wp/wp-content/plugins/easy-footnotes/assets/easy-footnotes.css?ver=1.1.0' type='text/css' media='' />
<link rel='stylesheet' id='dashicons-css'  href='http://lednique.com/wp/wp-includes/css/dashicons.min.css?ver=5.1.8' type='text/css' media='all' />
<script type='text/javascript'>
/* <![CDATA[ */
var wpcf7 = {"apiSettings":{"root":"http:\/\/lednique.com\/wp-json\/contact-form-7\/v1","namespace":"contact-form-7\/v1"},"recaptcha":{"messages":{"empty":"Please verify that you are not a robot."}}};
/* ]]> */
</script>
<script type='text/javascript' src='http://lednique.com/wp/wp-content/plugins/contact-form-7/includes/js/scripts.js?ver=5.0.5'></script>
<script type='text/javascript' src='http://lednique.com/wp/wp-content/plugins/simple-share-buttons-adder/js/ssba.js?ver=5.1.8'></script>
<script type='text/javascript'>
Main.boot( [] );
</script>
<script type='text/javascript' src='http://lednique.com/wp/wp-content/plugins/wp-category-tag-could/javascript/jquery.tagcanvas.min.js?ver=1.7.1'></script>
<script type='text/javascript' src='http://lednique.com/wp/wp-content/plugins/wp-category-tag-could/javascript/wpctc.tagcanvas.min.js?ver=1.7.1'></script>
<script type='text/javascript' src='http://lednique.com/wp/wp-content/plugins/wp-category-tag-could/javascript/jquery.style.min.js?ver=1.7.1'></script>
<script type='text/javascript' src='http://lednique.com/wp/wp-content/plugins/wp-category-tag-could/javascript/wp-category-tag-cloud.min.js?ver=1.7.1'></script>
<script type='text/javascript' src='http://lednique.com/wp/wp-content/themes/twentysixteen/js/skip-link-focus-fix.js?ver=20160816'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var screenReaderText = {"expand":"expand child menu","collapse":"collapse child menu"};
/* ]]> */
</script>
<script type='text/javascript' src='http://lednique.com/wp/wp-content/themes/twentysixteen/js/functions.js?ver=20160816'></script>
<script type='text/javascript' src='http://lednique.com/wp/wp-includes/js/wp-embed.min.js?ver=5.1.8'></script>
<script type='text/javascript' src='http://lednique.com/wp/wp-includes/js/imagesloaded.min.js?ver=3.2.0'></script>
<script type='text/javascript' src='http://lednique.com/wp/wp-content/plugins/easy-footnotes/assets/qtip/jquery.qtip.min.js?ver=3.0.3'></script>
<script type='text/javascript' src='http://lednique.com/wp/wp-content/plugins/easy-footnotes/assets/qtip/jquery.qtipcall.js?ver=1.1.0'></script>
<script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=default&#038;ver=1.3.11'></script>
</body>
</html>
